{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://physical-ai-textbook.dev/schemas/chapter-metadata.json",
  "title": "Chapter Metadata Schema",
  "description": "Validates frontmatter for all chapter MDX files in Physical AI & Humanoid Robotics textbook",
  "type": "object",
  "required": [
    "title",
    "description",
    "sidebar_position",
    "keywords",
    "module",
    "week_mapping",
    "prerequisites",
    "learning_objectives",
    "assessment_type",
    "difficulty_level",
    "code_dependencies",
    "estimated_time"
  ],
  "properties": {
    "title": {
      "type": "string",
      "minLength": 5,
      "maxLength": 100,
      "description": "Chapter title (H1 equivalent)"
    },
    "description": {
      "type": "string",
      "minLength": 50,
      "maxLength": 300,
      "description": "Brief chapter summary for SEO"
    },
    "sidebar_position": {
      "type": "integer",
      "minimum": 1,
      "description": "Numeric ordering in sidebar navigation"
    },
    "keywords": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 30
      },
      "minItems": 5,
      "maxItems": 15,
      "uniqueItems": true,
      "description": "SEO keywords for search optimization"
    },
    "module": {
      "type": "string",
      "enum": [
        "module-0",
        "module-1",
        "module-2",
        "module-3",
        "module-4",
        "capstone"
      ],
      "description": "Parent module identifier"
    },
    "week_mapping": {
      "type": "string",
      "pattern": "^Week [1-9]|1[0-3]( – [A-Za-z, &]+)?$",
      "description": "Specific week assignment (e.g., 'Week 4 – Tuesday & Thursday')"
    },
    "prerequisites": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["type", "title"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["internal", "external"]
          },
          "title": {
            "type": "string",
            "minLength": 3,
            "maxLength": 100
          },
          "link": {
            "type": "string",
            "format": "uri-reference",
            "description": "Required for internal prerequisites"
          },
          "description": {
            "type": "string",
            "maxLength": 200,
            "description": "Optional context for prerequisite"
          }
        },
        "if": {
          "properties": { "type": { "const": "internal" } }
        },
        "then": {
          "required": ["link"]
        }
      },
      "minItems": 0,
      "description": "Required prior knowledge (internal chapters + external topics)"
    },
    "learning_objectives": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 200,
        "pattern": "^(Explain|Derive|Implement|Apply|Analyze|Evaluate|Create|Design|Compare|Demonstrate)"
      },
      "minItems": 3,
      "maxItems": 7,
      "description": "Chapter-specific learning objectives (active voice verbs)"
    },
    "assessment_type": {
      "type": "string",
      "enum": ["conceptual", "computational", "implementation"],
      "description": "Primary exercise category for this chapter"
    },
    "difficulty_level": {
      "type": "string",
      "enum": ["beginner", "intermediate", "advanced"],
      "description": "Target reader skill level"
    },
    "capstone_component": {
      "type": "string",
      "minLength": 50,
      "maxLength": 200,
      "description": "How this chapter integrates with capstone project (optional)"
    },
    "code_dependencies": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9_-]+==\\d+\\.\\d+(\\.\\d+)?([a-z0-9]+)?$",
        "description": "Version-pinned package (e.g., 'numpy==1.24.3')"
      },
      "uniqueItems": true,
      "description": "All code dependencies with exact version pinning"
    },
    "estimated_time": {
      "type": "number",
      "minimum": 2,
      "maximum": 8,
      "description": "Estimated study hours for chapter completion"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 30
      },
      "uniqueItems": true,
      "description": "Optional Docusaurus tags for categorization"
    }
  },
  "additionalProperties": false
}
